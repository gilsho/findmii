function [diff scales] = dogfilter(img,levels,sigbase,sigfactor)
%dogfilter computes the difference of guassian filter on the image.
% returns for every point the biggest difference, along with the scale
% that achieved it
%       img is the image to be filtered
%       levels is the number of guassians to implement
%       sigbase is the initial sigma to inspect
%       sigfactor is the amount to multiply by

[rows,cols] = size(img);
diff = zeros(rows,cols);
scales = zeros(rows,cols);


order=50;
imgbw = rgb2gray(img);   
for i = 1:levels
    sigma = sigbase*(sigfactor^(levels-1));
    fimg = filter_laplacian(imgbw,order,sigma); 
end


diff = bsxfun(@max,abs(fimg),diff);
